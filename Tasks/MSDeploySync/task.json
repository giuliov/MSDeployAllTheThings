{
  "id": "A7DAFFCF-C793-4955-A0EB-0E393B81C43F",
  "name": "MSDeploySync",
  "friendlyName": "MSDeploy Sync",
  "description": "Publish a MSDeploy package.",
  "helpMarkDown": "",
  "category": "Deploy",
  "visibility": [
    "Build",
    "Release"
  ],
  "author": "Giulio Vian (@giulio_vian) derived from Robb Schiefer Jr. (@chief7) work",
  "version": {
    "Major": 0,
    "Minor": 7,
    "Patch": 3
  },
  "releaseNotes": "Windows only.",
  "preview": true,
  "demands": [],
  "minimumAgentVersion": "1.95.0",
  "groups": [
    {
      "name": "Source",
      "displayName": "Source",
      "isExpanded": true
    },
    {
      "name": "Destination",
      "displayName": "Destination",
      "isExpanded": true
    },
    {
      "name": "Authentication",
      "displayName": "Authentication",
      "isExpanded": false
    },
    {
      "name": "AdditionalOptions",
      "displayName": "Additional Options",
      "isExpanded": false
    }
  ],
  "inputs": [
    {
      "groupName": "Source",
      "name": "SourceProvider",
      "type": "pickList",
      "label": "Source Provider",
      "defaultValue": "package",
      "helpMarkDown": "The source MSDeploy provider. If blank, the package provider (package='$packageFile') will be used.",
      "required": false,
      "options": {
        "package": "package",
        "appHostConfig": "appHostConfig",
        "appHostSchema": "appHostSchema",
        "appPoolConfig": "appPoolConfig",
        "appPoolEnable32Bit": "appPoolEnable32Bit",
        "appPoolNetFx": "appPoolNetFx",
        "appPoolPipeline": "appPoolPipeline",
        "archiveDir": "archiveDir",
        "auto": "auto",
        "cert": "cert",
        "comObject32": "comObject32",
        "comObject64": "comObject64",
        "contentPath": "contentPath",
        "createApp": "createApp",
        "dbFullSql": "dbFullSql",
        "dbMySql": "dbMySql",
        "dbSqlite": "dbSqlite",
        "dirPath": "dirPath",
        "fcgiExtConfig": "fcgiExtConfig",
        "filePath": "filePath",
        "gacAssembly": "gacAssembly",
        "gacInstall": "gacInstall",
        "iisApp": "iisApp",
        "machineConfig32": "machineConfig32",
        "machineConfig64": "machineConfig64",
        "metaKey": "metaKey",
        "recycleApp": "recycleApp",
        "regKey": "regKey",
        "regValue": "regValue",
        "rootWebConfig32": "rootWebConfig32",
        "rootWebConfig64": "rootWebConfig64",
        "runCommand": "runCommand",
        "setAcl": "setAcl",
        "urlScanConfig": "urlScanConfig",
        "webApp": "webApp",
        "webServer": "webServer",
        "webServer60": "webServer60",
        "manifest": "manifest"
      },
      "properties": {
        "EditableOptions": "True"
      }
    },
    {
      "groupName": "Source",
      "name": "SourcePath",
      "type": "filePath",
      "label": "Web Deploy Package / Source Path",
      "defaultValue": "",
      "helpMarkDown": "Path to sources, typically the MSDeploy package under the default artifact directory.",
      "required": false
    },
    {
      "groupName": "Destination",
      "name": "DestinationProvider",
      "type": "pickList",
      "label": "Destination Provider",
      "defaultValue": "auto",
      "required": true,
      "helpMarkDown": "The destination MSDeploy provider.",
      "options": {
        "auto": "auto",
        "appHostConfig": "appHostConfig",
        "appHostSchema": "appHostSchema",
        "appPoolConfig": "appPoolConfig",
        "appPoolEnable32Bit": "appPoolEnable32Bit",
        "appPoolNetFx": "appPoolNetFx",
        "appPoolPipeline": "appPoolPipeline",
        "archiveDir": "archiveDir",
        "cert": "cert",
        "comObject32": "comObject32",
        "comObject64": "comObject64",
        "contentPath": "contentPath",
        "createApp": "createApp",
        "dbFullSql": "dbFullSql",
        "dbMySql": "dbMySql",
        "dbSqlite": "dbSqlite",
        "dirPath": "dirPath",
        "fcgiExtConfig": "fcgiExtConfig",
        "filePath": "filePath",
        "gacAssembly": "gacAssembly",
        "gacInstall": "gacInstall",
        "iisApp": "iisApp",
        "machineConfig32": "machineConfig32",
        "machineConfig64": "machineConfig64",
        "metaKey": "metaKey",
        "package": "package",
        "recycleApp": "recycleApp",
        "regKey": "regKey",
        "regValue": "regValue",
        "rootWebConfig32": "rootWebConfig32",
        "rootWebConfig64": "rootWebConfig64",
        "runCommand": "runCommand",
        "setAcl": "setAcl",
        "urlScanConfig": "urlScanConfig",
        "webApp": "webApp",
        "webServer": "webServer",
        "webServer60": "webServer60",
        "manifest": "manifest"
      },
      "properties": {
        "EditableOptions": "True"
      }
    },
    {
      "groupName": "Destination",
      "name": "DestinationPath",
      "type": "string",
      "label": "Destination Path",
      "defaultValue": "",
      "helpMarkDown": "Path to destination.",
      "required": false
    },
    {
      "groupName": "Destination",
      "name": "IncludeACLs",
      "type": "boolean",
      "label": "Include ACLs",
      "defaultValue": false,
      "helpMarkDown": "If ACLs on the specified path will be included in the sync operation. This setting applies to the file system, registry, and metabase. This setting is used with these providers: `appHostConfig`, `comObject32`, `comObject64`, `contentPath`, `dirPath`, `filePath`, `iisApp`, `metaKey`, `webServer`, and `webServer60`.",
      "required": false
    },
    {
      "groupName": "Destination",
      "name": "DestinationComputer",
      "type": "string",
      "label": "Destination Computer",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "The destination computer to deploy the MSDeploy package to. If blank, will perform operations on agent machine. For an Azure website the format should be https://[SiteName].scm.azurewebsites.net:443/msdeploy.axd?site=[SiteName]."
    },
    {
      "groupName": "Destination",
      "name": "Protocol",
      "type": "radio",
      "label": "Protocol",
      "defaultValue": "WMSvc",
      "helpMarkDown": "Protocol / server application.",
      "required": false,
      "options": {
        "custom": "Custom",
        "WMSvc": "Web Deploy Handler on default port (8172)",
        "MsDepSvc": "Web Deploy Remote Agent",
        "AzureWebSite": "Azure Web App"
      }
    },
    {
      "groupName": "Authentication",
      "name": "AuthType",
      "type": "pickList",
      "label": "Authentication Type",
      "defaultValue": "ntlm",
      "required": false,
      "options": {
        "none": "(no authentication)",
        "ntlm": "NTLM",
        "basic": "Basic"
      },
      "helpMarkDown": "Type of Authentication, prefer **NTLM** for deployment to the Web Deploy Remote Agent service and **Basic** for deployment to the Web Deploy Handler.",
      "properties": {
        "EditableOptions": "True"
      }
    },
    {
      "groupName": "Authentication",
      "name": "Username",
      "type": "string",
      "label": "Username",
      "defaultValue": "",
      "required": false
    },
    {
      "groupName": "Authentication",
      "name": "Password",
      "type": "string",
      "label": "Password",
      "defaultValue": "",
      "required": false
    },
    {
      "groupName": "Authentication",
      "name": "AllowUntrusted",
      "type": "boolean",
      "label": "Allow Untrusted",
      "defaultValue": true,
      "required": false,
      "helpMarkDown": "When specified, untrusted SSL connections are allowed; otherwise, untrusted SSL Connections are not allowed."
    },
    {
      "groupName": "AdditionalOptions",
      "name": "SetParameters",
      "type": "multiLine",
      "label": "Parameters to set",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Use a line for each parameter to set e.g. \r\n`param1=value1`\r\n`param2=value2`."
    },
    {
      "groupName": "AdditionalOptions",
      "name": "AdditionalArguments",
      "type": "multiLine",
      "label": "Additional Arguments",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Any additional MSDeploy argument."
    }
  ],
  "instanceNameFormat": "MSDeploy Sync: $(DestinationComputer) $(DestinationPath)",
  "execution": {
    "PowerShell3": {
      "target": "MSDeploySyncTask.ps1"
    }
  }
}